#/bin/bash

# Install yay to install applications from the Arch User Repository (yay)
sudo pacman -Sy yay --needed --noconfirm

# Keep-alive: update existing sudo time stamp if set, otherwise do nothing.
while true; do sudo -n true; sleep 60; kill -0 "$$" || exit; done 2>/dev/null &

yay_uninstall() {
    yay -R $1 --noconfirm
}

yay_install() {
    yay -Sy $1 --needed --noconfirm
}

install_gvim() {
    yay_uninstall 'vim'
    yay_install 'gvim'
}

install_wine() {
    yay_uninstall 'wine'
    yay_install 'wine-staging'
}

install_dotfiles() {
    DOTFILES_DIR="${HOME}/repo/randy/dotfiles"
    echo '>>>>>> Cloning repo `dotfiles`...'

    if [ ! -d $DOTFILES_DIR ]
    then
        mkdir -p -- ~/repo
        git clone https://github.com/randy-concepcion/dotfiles.git ${DOTFILES_DIR}
        echo ">>>>> Repo 'dotfiles' cloned to ${DOTFILES_DIR}..."
    else
        echo ">>>>> Repo 'dotfiles' already cloned to ${DOTFILES_DIR}"
    fi
}

# ----- Basic Applications ----- #
yay_install 'audacity'
yay_install 'code'
yay_install 'flameshot'
yay_install 'gimp'
yay_install 'git'
yay_install 'google-chrome'
yay_install 'slack-desktop'
yay_install 'spotify'
yay_install 'telegram-desktop'
yay_install 'transmission-qt'
yay_install 'trello'
yay_install 'viber'
yay_install 'zoom'

# ----- Tools ----- #
install_gvim
yay_install 'the_silver_searcher'
yay_install 'unzip'
yay_install 'xclip'

# ----- Applications with Custom Configs ----- #
install_dotfiles
